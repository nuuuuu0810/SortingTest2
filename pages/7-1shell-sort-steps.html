<section id="7-1shell-sort-steps" class="content-page">
    <h2>シェルソート ステップ</h2>
    <p>シェルソートの動作をステップごとに見ていきましょう。</p>
    <p>仮に、以下のような配列 `[34, 8, 64, 51, 32, 21, 17, 90]` があるとします。(要素数8)</p>
    <p>ギャップの系列として、例えば `h = N/2, N/4, ..., 1` (Hibbard系列などもっと良いものがある) を使います。ここでは単純に `h=4, 2, 1` とします。</p>
    <h3>ステップ 1: ギャップ `h = 4` でソート</h3>
    <p>配列: `[34, 8, 64, 51, 32, 21, 17, 90]`</p>
    <p>以下の4つの部分配列に対して挿入ソートを行います。</p>
    <ul>
        <li>グループ1 (インデックス 0, 4): `[34, 32]` → ソート後 `[32, 34]`
            <ul>
                <li>配列は `[32, 8, 64, 51, 34, 21, 17, 90]` となる</li>
            </ul>
        </li>
        <li>グループ2 (インデックス 1, 5): `[8, 21]` → ソート後 `[8, 21]` (変化なし)
            <ul>
                <li>配列は `[32, 8, 64, 51, 34, 21, 17, 90]` となる</li>
            </ul>
        </li>
        <li>グループ3 (インデックス 2, 6): `[64, 17]` → ソート後 `[17, 64]`
            <ul>
                <li>配列は `[32, 8, 17, 51, 34, 21, 64, 90]` となる</li>
            </ul>
        </li>
        <li>グループ4 (インデックス 3, 7): `[51, 90]` → ソート後 `[51, 90]` (変化なし)
            <ul>
                <li>配列は `[32, 8, 17, 51, 34, 21, 64, 90]` となる</li>
            </ul>
        </li>
    </ul>
    <p>ギャップ4でのソート後配列: `[32, 8, 17, 51, 34, 21, 64, 90]`</p>
    <h3>ステップ 2: ギャップ `h = 2` でソート</h3>
    <p>配列: `[32, 8, 17, 51, 34, 21, 64, 90]`</p>
    <p>以下の2つの部分配列に対して挿入ソートを行います。</p>
    <ul>
        <li>グループ1 (インデックス 0, 2, 4, 6): `[32, 17, 34, 64]`
            <ul>
                <li>`17` を挿入: `[17, 32, 34, 64]`</li>
                <li>`34` を挿入: (変化なし)</li>
                <li>`64` を挿入: (変化なし)</li>
                <li>ソート後: `[17, 32, 34, 64]`</li>
                <li>配列に反映: `[17, 8, 32, 51, 34, 21, 64, 90]` (グループ1の要素が更新される)</li>
            </ul>
        </li>
        <li>グループ2 (インデックス 1, 3, 5, 7): `[8, 51, 21, 90]`
            <ul>
                <li>`51` を挿入: (変化なし)</li>
                <li>`21` を挿入: `[8, 21, 51, 90]`</li>
                <li>`90` を挿入: (変化なし)</li>
                <li>ソート後: `[8, 21, 51, 90]`</li>
                <li>配列に反映: `[17, 8, 32, 21, 34, 51, 64, 90]` (グループ2の要素が更新される)</li>
            </ul>
        </li>
    </ul>
    <p>ギャップ2でのソート後配列: `[17, 8, 32, 21, 34, 51, 64, 90]`</p>
    <h3>ステップ 3: ギャップ `h = 1` でソート</h3>
    <p>配列: `[17, 8, 32, 21, 34, 51, 64, 90]`</p>
    <p>これは通常の挿入ソートと同じです。配列全体 `[17, 8, 32, 21, 34, 51, 64, 90]` に対して挿入ソートを適用します。</p>
    <ul>
        <li>`8` を挿入: `[8, 17, 32, 21, 34, 51, 64, 90]`</li>
        <li>`32` を挿入: (変化なし)</li>
        <li>`21` を挿入: `[8, 17, 21, 32, 34, 51, 64, 90]`</li>
        <li>`34` を挿入: (変化なし)</li>
        <li>`51` を挿入: (変化なし)</li>
        <li>`64` を挿入: (変化なし)</li>
        <li>`90` を挿入: (変化なし)</li>
    </ul>
    <p>ギャップ1でのソート後配列 (最終結果): `[8, 17, 21, 32, 34, 51, 64, 90]`</p>
    <p>最初のギャップが大きい段階で、要素が大きく移動し、全体がある程度ソートされた状態になります。ギャップを小さくしていくにつれて、より細かい調整が行われ、最終的にギャップ1の挿入ソートでは、ほぼ整列されたデータに対して効率的に動作します。</p>
</section>