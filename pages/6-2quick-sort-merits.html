<section id="6-2quick-sort-merits" class="content-page">
    <h2>クイックソートのメリット</h2>
    <p>クイックソートは、その名の通り高速なソートアルゴリズムであり、多くのメリットがあります。</p>
    <ul>
        <li><strong>平均的に非常に高速:</strong> 平均計算量は O(N log N) であり、これは比較ソートアルゴリズムの理論的な下限に近いです。実際の実装でも、多くのケースで他の O(N log N) アルゴリズム（マージソートやヒープソート）よりも定数倍高速に動作することが多いです。</li>
        <li><strong>In-place（インプレース）である:</strong> マージソートのように追加の大きなメモリ領域を必要とせず、与えられた配列内で要素を並べ替えることができます（スタック領域は再帰呼び出しのために使用します）。メモリ効率が良いと言えます。</li>
        <li><strong>キャッシュ効率が良い:</strong> データへのアクセスが局所的になる傾向があり、CPUキャッシュを効率的に利用できるため、実測性能が高くなりやすいです。</li>
        <li><strong>実装のバリエーションが豊富:</strong> ピボットの選択方法（最初の要素、中央の要素、ランダムな要素、3つの中央値など）やパーティショニングの方法（Lomuto方式、Hoare方式など）に様々なバリエーションがあり、状況に応じて最適化を図ることができます。</li>
    </ul>
    <p><strong>デメリットと注意点:</strong></p>
    <ul>
        <li><strong>最悪計算量が O(N<sup>2</sup>):</strong> ピボットの選択が毎回最悪（常に最小または最大の要素が選ばれるなど）の場合、分割が偏ってしまい、計算量が O(N<sup>2</sup>) になります。これは、データが既にソート済み、または逆順にソート済みの場合に単純なピボット選択戦略（例：常に先頭要素を選ぶ）で発生しやすいです。これを避けるために、ランダムピボット選択や三数中央値法などが用いられます。</li>
        <li><strong>安定ソートではない:</strong> 一般的なクイックソートの実装は安定ソートではありません。つまり、同じ値を持つ要素の元の順序がソート後に保持されるとは限りません。安定性が必要な場合は、追加の工夫をするか、マージソートなどの安定なアルゴリズムを検討する必要があります。</li>
        <li><strong>再帰呼び出しによるスタックオーバーフローの可能性:</strong> 深い再帰が発生すると、スタック領域を使い果たしてプログラムがクラッシュする可能性があります。末尾再帰の最適化や、非再帰的な実装で回避できます。また、小さい部分配列には挿入ソートなどを用いるハイブリッドアプローチも有効です。</li>
    </ul>
    <p>これらの特性を理解し、適切に実装・利用することで、クイックソートは非常に強力なソート手法となります。多くのプログラミング言語の標準ソートライブラリ（の一部）でも採用されています（イントロソートなど、クイックソートを改良したものが使われることが多い）。</p>
</section>